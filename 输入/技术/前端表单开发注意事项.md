# 前端表单与表格开发注意事项

## 表单开发

### 1.  数据的新增与编辑

新增与编辑使用同一个表单组件，并且该组件在一个模态框中时，对新增与回填的区分处理有两种方案：

#### 1.1 监听父组件传入的ID值

一般如果是编辑，父组件会将属性的ID值改变为用户选择的那条数据的ID，如果是新增，则ID设为0，子组件通过监听该ID的变动来进行新增与编辑的区别处理：

* 如果是新增，则清空所有表单域，重置所有状态到初始化状态；
* 如果是编辑，则通过ID去获取数据详情，拿到结果后为表单对象赋值

#### 1.2  销毁模态框

每次取消编辑/新增或关闭模态框，都需要销毁模态框，这样下次再此打开时，是新打开的一个表单，就会自动重置数据和状态，如果父组件传入的ID不为0，则按照编辑处理。

### 2. 确定选择器中选项列表的长度

如果选项数据量很大，加载会很慢，需要考虑分页方案，分页的实现有两种方案：

#### 2.1  选择器分页

在支持选择器插槽的`UI`框架中（如`Ant-design-vue`），可以通过插槽将分页组件插入选择器。

#### 2.2 单独弹窗分页表格选择

单独再弹出一个弹窗，在弹窗中将数据展现为可选择的表格，在表格中选择，选择后的数据传递给选择器

### 3. 文本域换行

有时候，文本域（`textarea`）要求支持换行，则需要在细览页中展示时对该字段所在元素设置`white-space: pre`属性来输出键入内容时的回车换行符。

如果`placehold`需要换行，则直接在`html`编码时进行回车换行就行。

### 4.  选择器选项过滤

需求确认阶段，需要确认选择器选项较多时是否需要选项过滤功能。

### 5. 文件上传

#### 格式限制

`accept`属性接收一个字符串，字符串中包含所有允许的格式，以逗号分隔，需要在格式前加`.`

#### 事件实现

以下事件最好进行实现：

	* 上传前： 校验图片格式和大小是否符合要求，对图片进行裁剪等
	* 上传中： 上传进度显示
	* 上传成功： 成功后将文件加入待保存列表
	* 上传失败： 给出失败原因
	* 移除： 从待保存列表移除

### 6. 日期时间选择器



## 表格开发

### 1. 超出一定高度和宽度进行滚动



### 2. 页面缩放或页面隐藏元素收缩展开时表格的滚动高度改变



### 3. 检索条件改变时分页参数重置



### 4. 翻页后检索时需要重置分页参数



### 5.  分页插件与页面跳转插件的页码同步



### 6. 翻页后新建数据完成需要重置分页（分页页码、跳转页码、序号关联页码）



