JavaScript之（|、||、&、&&）操作符

# JavaScript之（|、||、&、&&）操作符

[[webp](../_resources/eaaa0febf823a34d257484b527c92e27.webp)](https://www.jianshu.com/u/224f494a7f79)

[Rin阳](https://www.jianshu.com/u/224f494a7f79)

*![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1em' height='1em' fill='currentColor' aria-hidden='true' focusable='false' class='js-evernote-checked' data-evernote-id='274'%3e%3cpath d='M751.144277 307.2l-123.016533-238.933333h159.778133a81.92 81.92 0 0 1 59.1872 25.258666l160.256 167.492267A27.306667 27.306667 0 0 1 987.620011 307.2h-236.475734z m270.506667 111.547733L640.927744 946.039467a27.306667 27.306667 0 0 1-48.128-24.234667L766.504277 375.466667h-56.388266l-170.5984 590.165333a27.306667 27.306667 0 0 1-52.462934 0.034133L315.500544 375.466667H259.112277l174.523734 545.5872a27.306667 27.306667 0 0 1-48.128 24.302933L5.160277 418.747733A27.306667 27.306667 0 0 1 27.346944 375.466667H999.464277a27.306667 27.306667 0 0 1 22.152534 43.281066zM18.301611 261.0176L178.557611 93.525333A81.92 81.92 0 0 1 237.744811 68.266667h159.744L274.506411 307.2H38.030677a27.306667 27.306667 0 0 1-19.729066-46.1824zM453.877077 68.266667h117.896534l122.9824 238.933333H330.894677l122.9824-238.933333z' data-evernote-id='157' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)*0.0712016.01.04 15:21:03字数 1,321阅读 6,660

最近在回顾《JavaScript高级程序设计 第三版》时，在 **逻辑操作符** 与 **位操作符** 章节中发现了许多细节在书中被没有讲解清楚，查阅相关资料测试后特来整理一下学习心得。

## 位操作符

* * *

学过java的都知道运算符（|、&）可以进行位运算，**同时也可以充当逻辑操作符。**
先看如下java代码片段：

	class Demo {
	    public static void main(String[] args) {

	        int number = 2;
	        boolean logic = number < 5 & number > 0;
	        System.out.print(logic);   // 结果logic 返回 true
	    }
	}
	12345678

通过上面代码片段的结果，我们可以看出在java中使用 **位操作符** 可以操作布尔值，而且返回的是一个 **布尔值** 。那么在JavaScript中使用 **位操作符** 操作布尔值会是什么结果呢？

先看如下javascript代码片段：

	var number = 2;
	var logic = number < 5 | number > 0;

	console.log(number < 5);  // 结果返回 true
	console.log(logic);  // 结果返回 1
	12345

通过上面代码片段结果，我们可以发现JavaScript中并没有像java那样返回 **布尔值**，而是 **数值**。
我们再来一个简单粗暴的例子。

	var logic = true | true;
	console.log(logic);  //结果返回 1
	12

可以看到结果还是一样，也就是说在JavaScript中 **位操作符** 只有1个功能：进行位运算。
那么JavaScript中 **位操作符** 去操作 **非数值** 是怎样处理的呢。

	/* 测试类型1 */
	var str1 = '9';
	var str2 = '5';
	console.log(str1 & str2);  // 结果为 1
	console.log(typeof (str1 & str2)); //结果为 number 类型
	12345
	/* 测试类型2 */
	var number1 = 9;
	var number2 = 5;
	console.log(number1 & number2); 结果为 1
	1234
	/* 测试类型3 */
	var obj1 = {
	    valueOf: function() {
	        return 9;
	    }
	}
	var obj2 = {
	    valueOf: function() {
	        return 5;
	    }
	}
	console.log(obj1 & obj2); // 结果为 1
	123456789101112

9 的二进制：1001
5 的二进制：0101
& 操作结果：0001 = 1

从上面代码中我们发现了一些倪端，string类型、number类型、object类型操作结果相等，那么这里又涉及到了另一个知识点，**数值转换**。如果操作数不是数值类型，就会根据一定规则把它转换成数值，若不能转化成数值则为NaN。

如果NaN & NaN会得出什么结果？

	console.log(NaN & NaN);  // 结果为 0
	console.log('stirng' & 'string');  // 字符串转换为NaN，结果为 0
	console.log(10 & NaN);  // 10 & 0，结果为 0
	123

如果是 **infinity**（正无穷） 或者是 **-infinity** 呢？

	console.log(-Infinity & -Infinity);  // 结果为 0
	1

结果还是为0。
到这里我们可以总结一下位操作符`（&、|）`的用法：

1. JavaScript中与java中的 **位操作符** 功能不同。java中位运算符可以操作 **数值型** 和 **布尔型**（非短路逻辑操作）；而JS中只能当做 **数值** 进行位运算，与`^(按位异或)、 ~(按位非)、 <<(左移)、 >>(右移)、 >>>(无符号右移)`功能一样，若操作数为非数值，则转换为数值。（数值转换规则不在本文阐述）

2. 若操作number类型的 **NaN、-Infinity、Infinity** 则会被转换会数值 0。

## 逻辑操作符

* * *

逻辑操作符又叫布尔操作符。在java中 **逻辑操作符(&&、||、！)** 只能操作boolean类型，也只能返回boolean类型；但在JavaScript中却可以操作 **ECMAScript中的任何值** ，同时也不强制返回boolean类型，这为JavaScript开发提供了很大的便利。

我们经常遇见这样的代码：

	  var oEv = ev || event;  // 获取事件对象
	1

在新手第一次接触这样的代码会很疑惑，我们先接着往下看。

##### 逻辑或操作符（||）

1.在讲之前我们先看如下示例代码：

	console.log(0 || '我是string，boolean值为true');          // 返回字符串
	console.log(NaN || '我是string，boolean值为true');        // 返回字符串
	console.log('' || '我是string，boolean值为true');         // 返回字符串
	console.log(null || '我是string，boolean值为true');       // 返回字符串
	console.log(undefined || '我是string，boolean值为true');  // 返回字符串
	12345

我们知道 0、NaN、' '、null、undefined转换为boolean值都为flase，若第一个值为false，第二个值为true，则返回第二个值。
2.如下示例代码：

	console.log(0 || 'NaN');           // 返回 NaN
	console.log(NaN || '');            // 返回 '' 空字符串
	console.log('' || null);           // 返回 null
	console.log(null || 'undefined');  // 返回 undefined
	console.log(undefined || 0);       // 返回 0
	12345

结合上面两个例子我们可以发现，** 只要第一个值的布尔值为false，那么永远返回第二个值，**不管第二个值的布尔值是true还是false。
这样的结果跟我想像中的不太一样，它有些违背 **逻辑或** （在我看来若两个值为false，结果应该返回布尔值 false）的操作。
3.如下示例代码：

	var obj = {};
	console.log(obj || NaN);      // 返回 obj
	console.log(obj || number);   // 返回 obj
	console.log( 0 || number);    // 报错，number未定义
	1234

通过这个例子可以发现逻辑或属于短路操作，只要第一个值的布尔值为true，不再操作第二个值，直接返回第一个值，number变量未定义也不会报错。

##### 逻辑与操作符（&&）

**逻辑与** 操作符在JavaScript中主要用在条件判断语句中，极少情况下出现在赋值语句中，特性和 **逻辑或** 很相似。
1.看如下示例代码：

	var obj = {};
	console.log(0 && obj);               // 返回 0
	console.log(NaN && obj);             // 返回 NaN
	console.log('' && obj);              // 返回 '' 空字符串
	console.log(null && obj);            // 返回 null
	console.log(undefined && obj);       // 返回 undefined
	// number 未定义
	console.log(undefined && number);    // 返回 undefined 不会报错
	12345678

通过上面的代码发现 **逻辑与** 与 **逻辑或** 很近似，**逻辑与** 也属于短路操作；当第一个值的布尔值为false，它不再操作第二个值，同时直接返回第一个值。

2.如下示例代码：

	var obj = {};
	var str = 'Riny';

	/* 当第一个值的布尔值为true 返回第二个值 */
	console.log(obj && 0);          // 返回 0
	console.log(obj && NaN);        // 返回 NaN
	console.log(obj && '');         // 返回 '' 空字符串
	console.log(obj && undefined);  // 返回 undefined
	console.log(obj && null);       // 返回 null

	/* 当第一个值的布尔值为true 返回第二个值 */
	console.log(obj && str);        // 返回 字符串

	12345678910111213

通过上面比较可以发现，**逻辑与** 只要第一个值的布尔值为true，永远返回第二个值。
**逻辑或（||）总结：**
1. 只要第一个值的布尔值为false，那么永远返回第二个值。
2. 逻辑或属于短路操作，第一个值为true时，不再操作第二个值，且返回第一个值。
**逻辑与（&&）总结：**
1. 只要第一个值的布尔值为true，那么永远返回第二个值。
2. 逻辑与属于短路操作，第一个值为false时，不再操作第二个值，且返回第一个值。
通过结论我们发现这两点比书上讲的简单，而且特别的好记。

*![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1em' height='1em' fill='currentColor' aria-hidden='true' focusable='false' class='js-evernote-checked' data-evernote-id='981'%3e%3cpath d='M728.064 343.943529c-17.648941-2.891294-23.552-20.239059-26.503529-28.912941V104.026353C701.560471 46.200471 654.396235 0 595.425882 0c-53.007059 0-97.28 40.478118-106.134588 89.569882-29.997176 184.862118-138.541176 255.457882-217.630118 280.937412a26.142118 26.142118 0 0 0-18.130823 24.877177v560.067764c0 19.817412 16.022588 35.84 35.84 35.84h535.973647c56.018824-11.565176 94.328471-31.804235 120.892235-86.738823l120.832-416.105412c23.552-75.173647-14.757647-147.395765-100.231529-144.564706h-238.772706z m-571.813647 31.744H76.619294C35.358118 375.687529 0 410.383059 0 450.861176v462.426353c0 43.369412 32.406588 78.004706 76.619294 78.004706h79.631059c27.708235 0 50.115765-22.407529 50.115765-50.115764V425.863529a50.115765 50.115765 0 0 0-50.115765-50.115764z' data-evernote-id='151' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)*

5人点赞*![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='64 64 896 896' focusable='false' class='js-evernote-checked' data-icon='right' width='1em' height='1em' fill='currentColor' aria-hidden='true' data-evernote-id='985'%3e%3cpath d='M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z' data-evernote-id='986' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)*

*![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1em' height='1em' fill='currentColor' aria-hidden='true' focusable='false' class='js-evernote-checked' data-evernote-id='990'%3e%3cpath d='M771.413333 668.728889c-18.773333 3.015111-25.031111 20.878222-28.16 29.866667v217.884444c0 59.733333-49.948444 107.52-112.412444 107.52a115.427556 115.427556 0 0 1-112.412445-92.558222c-31.857778-190.919111-146.830222-263.850667-230.627555-290.133334a27.420444 27.420444 0 0 1-19.228445-26.168888V37.944889C268.572444 17.066667 285.582222 0 306.631111 0h567.864889c59.335111 11.946667 99.953778 32.824889 128 89.543111l128.113778 429.909333c24.974222 77.653333-15.644444 152.291556-106.211556 149.276445H771.413333z m-605.866666-32.824889H81.180444C37.546667 635.904 0 600.064 0 558.250667V80.611556C0 35.84 34.360889 0 81.180444 0H165.546667c29.297778 0 53.077333 23.779556 53.077333 53.077333v529.749334a53.077333 53.077333 0 0 1-53.077333 53.077333z' data-evernote-id='130' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)*

[*![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1em' height='1em' fill='currentColor' aria-hidden='true' focusable='false' class='js-evernote-checked' data-evernote-id='995'%3e%3cpath d='M178.390055 120.591045C111.268624 120.591045 56.888889 174.401955 56.888889 240.556383V903.97778C56.888889 970.302855 111.097977 1024 178.390055 1024h545.731364c67.121431 0 121.558049-53.81091 121.558049-120.02222V240.613265c0-66.268192-54.209088-120.02222-121.558049-120.02222H178.390055z m455.117432 301.136319H269.06087a30.147761 30.147761 0 0 1 0-60.238641h364.503499a30.147761 30.147761 0 0 1 0 60.238641z m303.18409 301.136318a30.318409 30.318409 0 0 1-30.375291-30.318409V180.317742c0-66.268192-53.81091-120.02222-121.330519-120.022219H329.697688a30.147761 30.147761 0 0 1 0-60.23864l454.946784 0.056882C885.326618 0.113765 967.009987 80.887013 967.009987 180.602155v511.943118a30.318409 30.318409 0 0 1-30.31841 30.318409z m-303.18409-120.47728H269.06087a30.147761 30.147761 0 1 1 0-60.238641h364.503499a30.147761 30.147761 0 0 1 0 60.238641z' data-evernote-id='141' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)*JavaScript](https://www.jianshu.com/nb/2535967)

*![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1em' height='1em' fill='currentColor' aria-hidden='true' focusable='false' class='js-evernote-checked' data-evernote-id='1001'%3e%3cpath d='M232.727273 579.87878833C271.28679 579.87878833 302.545455 548.62012233 302.545455 510.06060633 302.545455 471.50108933 271.28679 440.24242433 232.727273 440.24242433 194.167756 440.24242433 162.909091 471.50108933 162.909091 510.06060633 162.909091 548.62012233 194.167756 579.87878833 232.727273 579.87878833ZM512 579.87878833C550.559516 579.87878833 581.818182 548.62012233 581.818182 510.06060633 581.818182 471.50108933 550.559516 440.24242433 512 440.24242433 473.440484 440.24242433 442.181818 471.50108933 442.181818 510.06060633 442.181818 548.62012233 473.440484 579.87878833 512 579.87878833ZM791.272727 579.87878833C829.832243 579.87878833 861.090909 548.62012233 861.090909 510.06060633 861.090909 471.50108933 829.832243 440.24242433 791.272727 440.24242433 752.713211 440.24242433 721.454545 471.50108933 721.454545 510.06060633 721.454545 548.62012233 752.713211 579.87878833 791.272727 579.87878833Z' data-evernote-id='161' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)*

"小礼物走一走，来简书关注我"
还没有人赞赏，支持一下

[[webp](../_resources/73caf151eabd62f09d783ff7a81546b7.webp)](https://www.jianshu.com/u/224f494a7f79)

[Rin阳](https://www.jianshu.com/u/224f494a7f79)
总资产2 (约0.24元)共写了1.7W字获得156个赞共112个粉丝